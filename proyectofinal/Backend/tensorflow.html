<html>

<head>
  <!-- Load TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.13.0"> </script>

  <!-- Place your code in the script tag below. You can also use an external .js file -->
  <script>

      // const loadedModel = tf.loadModel('localstorage://my-model-1').then ((s) => {

      // console.log('Prediction from loaded model:',s);
      // s.predict(xs).print();
      // });

    const model = tf.sequential();

    // layer intermedio neuronal
    const hidden = tf.layers.dense({
      units: 25,
      inputShape: [6],     // indico cantidad de datos de entrada
      // activation: 'sigmoid'
    });

    model.add(hidden);

    // layer de output
    const output = tf.layers.dense({
      units: 2,
      // activation: 'sigmoid'
    });

    model.add(output);


    // Preparo el modelo para entrenarse indicando la funcion optimizer y la de minimizar error
    const sgdOpt = tf.train.sgd(0.0001);
    model.compile({
      loss: 'meanSquaredError',
      optimizer: sgdOpt
    });

    // input tensor altura (cm), peso, sexo(0 hombre; 1 mujer), edad, tiempo, ejercicio (0 camina; 1 corre)
    var persona = {
      altura: 17,
      peso: 59021,
      sexo: 0,
      edad: 20,
      tiempo: 25,
      tipoActividad: 1,
    }

    var resultado = {
      gramosQuemados: 15,
      caloriasQuemadas: 114
    }
 
    // var xs = tf.tensor2d([
    // [18,59.1234,0,32,30,0]
    // ])

    // var ys = tf.tensor2d([
    // [21,16.2]
    //   ]);
    

    var xs = tf.tensor2d([
    [18,69.923,30,0,30,2],
    [18,69.983,30,0,30,2],
    [18,69.944,30,0,30,2],
    [18,69.683,30,0,30,2],
    [18,69.78,30,0,30,2],
    [18,69.864,30,0,30,1],
    [18,69.711,30,0,30,1],
    [18,69.662,30,0,30,1],
    [18,69.624,30,0,30,2],
    [17,58.904,20,0,30,1],
[17,58.886,20,0,30,1],
[17,58.801,20,0,30,1],
[17,58.725,20,0,30,2],
[17,59.007,20,0,30,2],
[17,59.001,20,0,30,2],
[17,59.048,20,0,30,2],
[17,58.678,20,0,30,1],
[17,58.713,20,0,30,2],
[17,58.889,20,0,30,1],
[17,58.695,20,0,30,2],
[17,58.731,20,0,30,2],
[17,58.912,20,0,30,2],
[17,58.977,20,0,30,2],
[17,58.821,20,0,30,1],
[17,58.93,20,0,30,2],
[17,58.754,20,0,30,1],
[17,58.772,20,0,30,1],
[17,58.871,20,0,30,2],
[17,58.96,20,0,30,2],
[17,58.255,20,0,30,1],
[17,58.313,20,0,30,2],
[17,58.482,20,0,30,1],
[17,58.406,20,0,30,2],
[17,58.464,20,0,30,2],
[17,58.441,20,0,30,1],
[17,58.499,20,0,30,1],
[17,58.523,20,0,30,2],
[17,58.231,20,0,30,1],
[17,58.272,20,0,30,2],
[17,58.377,20,0,30,1],
[17,58.54,20,0,30,1],
[17,58.33,20,0,30,1],
[17,58.295,20,0,30,2],
[17,58.424,20,0,30,2],
[17,58.625,20,0,30,2],
[18,70,30,0,25,1],
[18,69.962,30,0,25,2],
[18,69.895,30,0,25,1],
[17,58.467,20,0,30,1],
[17,58.394,20,0,30,1],
[17,58.33,20,0,30,2],
[17,58.348,20,0,30,2],
[17,58.234,20,0,30,1],
[17,58.526,20,0,30,2],
[17,58.365,20,0,30,1],
[17,58.508,20,0,30,1],
[17,58.313,20,0,30,2],
[17,58.485,20,0,30,1],
[17,58.444,20,0,30,1],
[17,58.61,20,0,30,1],
[17,58.593,20,0,30,2],
[17,58.412,20,0,30,2],
[17,58.162,20,0,30,1],
[17,58.179,20,0,30,1],
[17,58.104,20,0,30,1],
[17,58.014,20,0,30,2],
[17,58.046,20,0,30,2],
[18,69.596,30,0,25,2],
[18,69.843,30,0,25,1],
[18,69.819,30,0,25,1],
[18,69.752,30,0,25,1],
[18,69.728,30,0,25,2],
[18,69.641,30,0,25,1],
[17,58.046,20,0,30,1],
[17,58.185,20,0,30,2],
[17,58.168,20,0,30,2],
[17,58.098,20,0,30,2],
[17,58.202,20,0,30,1],
[17,58.028,20,0,30,2],
[17,58.136,20,0,30,1],
[17,57.869,20,0,30,1],
[17,57.953,20,0,30,2],
[17,57.936,20,0,30,2],
[17,57.985,20,0,30,2],
[17,57.904,20,0,30,2],
[17,57.887,20,0,30,2],
[17.5,64.855,25,1,30,1],
[17.5,64.733,25,1,30,2],
[17.5,64.906,25,1,30,1],
[17.5,64.943,25,1,30,1],
[17.5,64.872,25,1,30,1],
[17.5,64.767,25,1,30,1],
[17.5,64.889,25,1,30,2],
[17.5,64.75,25,1,30,1],
[17.5,64.609,25,1,30,1],
[17.5,64.669,25,1,30,1],
[17.5,64.581,25,1,30,2],
[17.5,64.575,25,1,30,2],
[17.5,64.821,25,1,30,2],
[17.5,64.745,25,1,30,1],
[17.5,64.654,25,1,30,2],
[17.5,64.779,25,1,30,1],
[17.5,64.714,25,1,30,2],
[17.5,64.762,25,1,30,1],
[17.5,64.892,25,1,30,1],
[17.5,64.943,25,1,30,1],
[17.5,64.869,25,1,30,2],
[17.5,64.838,25,1,30,2],
[17.5,64.626,25,1,30,2],
[17.5,64.435,25,1,30,2],
[17.5,64.502,25,1,30,2],
[17.5,64.451,25,1,30,2],
[17.5,64.553,25,1,30,2],
[17,59.021,20,0,25,1],
[17,58.989,20,0,25,1],
[17,59.092,20,0,25,2],
[17,59.063,20,0,25,1],
[17,58.974,20,0,25,1],
[17,59.077,20,0,25,2],
[17,59.042,20,0,25,1],
[17,59.015,20,0,25,1],
[17,59.03,20,0,25,1],
[17,59.063,20,0,25,2],
[17,59.077,20,0,25,1],
[17,59.092,20,0,25,1],
[17,58.945,20,0,25,2],
[17,58.918,20,0,25,1],
[17,58.669,20,0,25,1],
[17,58.754,20,0,25,2],
[17,58.848,20,0,25,1],
[17,58.739,20,0,25,1],
[17,58.96,20,0,25,1],
[17,58.593,20,0,25,2],
[17,58.783,20,0,25,1],
[17,58.868,20,0,25,2],
[17,58.578,20,0,25,2],
[17,58.689,20,0,25,2],
[17,58.833,20,0,25,2],
[17,58.608,20,0,25,2],
[17,58.769,20,0,25,1],
[17,58.64,20,0,25,2],
[17,58.654,20,0,25,2],
[17,58.836,20,0,25,1],
[17,58.575,20,0,25,2],
[17,58.798,20,0,25,2],
[17,58.646,20,0,25,2],
[17,58.546,20,0,25,2],
[17,58.631,20,0,25,2],
[17,58.66,20,0,25,1],
[17,58.561,20,0,25,1],
[17,58.359,20,0,25,2],
[17,58.086,20,0,25,1],
[17,58.345,20,0,25,2],
[17,58.139,20,0,25,2],
[17,58.208,20,0,25,1],
[17,58.194,20,0,25,1],
[17,58.124,20,0,25,1],
[17,58.072,20,0,25,2],
[17,58.028,20,0,25,1],
[17,58.255,20,0,25,2],
[17,58.06,20,0,25,1],
[17,58.29,20,0,25,2],
[17,58.217,20,0,25,1],
[17,58.075,20,0,25,1],
[17,58.275,20,0,25,2],
[17,58.112,20,0,25,2],
[17,58.426,20,0,25,2],
[17,58.15,20,0,25,1],
[17,57.999,20,0,25,2],
[17,57.968,20,0,25,2],
[17,57.918,20,0,25,1],
[17,57.838,20,0,25,1],
[17,57.852,20,0,25,1],
[17.5,64.81,25,1,25,1],
[17.5,64.782,25,1,25,2],
[17.5,64.838,25,1,25,2],
[17.5,64.702,25,1,25,1],
[17.5,64.926,25,1,25,1],
[17.5,64.796,25,1,25,1],
[17.5,64.717,25,1,25,2],
[17.5,64.683,25,1,25,2],
[17.5,64.652,25,1,25,1],
[17.5,64.637,25,1,25,1],
[17.5,64.623,25,1,25,2],
[17.5,64.824,25,1,25,2],
[17.5,64.418,25,1,25,2],
[17.5,64.697,25,1,25,2],
[17.5,64.59,25,1,25,2],
[17.5,64.669,25,1,25,1],
[17.5,64.516,25,1,25,2],
[17.5,64.852,25,1,25,2],
[17.5,64.912,25,1,25,2],
[17.5,64.53,25,1,25,1],
[17.5,64.604,25,1,25,1],
[17.5,64.926,25,1,25,1],
[17.5,64.804,25,1,25,2],
[17.5,64.728,25,1,25,2],
[17.5,64.683,25,1,25,1],
[17.5,64.485,25,1,25,1],
[17.5,64.466,25,1,25,2],
[18,69.579,30,0,10,1],
[18,69.759,30,0,10,1],
[18,69.878,30,0,10,2],
[18,69.69,30,0,10,1],
[18,69.826,30,0,10,2],
[18,69.603,30,0,10,1],
[18,69.787,30,0,10,2],
[18,69.902,30,0,10,2],
[18,69.871,30,0,10,2],
[18,69.794,30,0,10,1],
[18,69.735,30,0,10,2],
[18,69.801,30,0,10,2],
[17,59.098,20,0,10,1],
[17,59.098,20,0,10,2],
[17,58.552,20,0,10,1],
[17,58.695,20,0,10,1],
[17,58.505,20,0,10,1],
[17,58.383,20,0,10,2],
[17,59.048,20,0,10,1],
[17,58.707,20,0,10,2],
[17,58.813,20,0,10,1],
[17,58.447,20,0,10,2],
[17,58.924,20,0,10,1],
[17,59.027,20,0,10,2],
[17,58.854,20,0,10,2],
[17,58.701,20,0,10,1],
[17,58.564,20,0,10,2],
[17,58.11,20,0,10,2],
[17,58.818,20,0,10,2],
[17,58.675,20,0,10,1],
[17,58.237,20,0,10,1],
[17,58.558,20,0,10,2],
[17,58.144,20,0,10,2],
[17,58.214,20,0,10,1],
[17,58.807,20,0,10,1],
[17,58.389,20,0,10,1],
[17,58.93,20,0,10,2],
[17,58.278,20,0,10,1],
[17,58.546,20,0,10,1],
[17,57.997,20,0,10,2],
[17,58.052,20,0,10,2],
[17,58.081,20,0,10,2],
[17,58.118,20,0,10,1],
[17,58.983,20,0,10,1],
[17,58.377,20,0,10,2],
[17,58.783,20,0,10,1],
[17,58.371,20,0,10,1],
[17,58.854,20,0,10,1],
[17,58.804,20,0,10,2],
[17,58.295,20,0,10,2],
[17,58.616,20,0,10,1],
[17,58.895,20,0,10,1],
[17,58.261,20,0,10,1],
[17,58.936,20,0,10,1],
[17,58.942,20,0,10,1],
[17,58.848,20,0,10,1],
[17,58.777,20,0,10,1],
[17,58.45,20,0,10,1],
[17,58.736,20,0,10,1],
[17,58.24,20,0,10,2],
[17,58.532,20,0,10,1],
[17,58.491,20,0,10,2],
[17,58.842,20,0,10,1],
[17,57.823,20,0,10,1],
[17,58.011,20,0,10,1],
[17.5,64.688,25,1,10,1],
[17.5,64.912,25,1,10,2],
[17.5,64.587,25,1,10,1],
[17.5,64.592,25,1,10,2],
[17.5,64.637,25,1,10,2],
[17.5,64.784,25,1,10,2],
[17.5,64.898,25,1,10,1],
[17.5,64.79,25,1,10,2],
[17.5,64.632,25,1,10,1],
[17.5,64.875,25,1,10,2],
[17.5,64.609,25,1,10,1],
[17.5,64.558,25,1,10,2],
[17.5,64.536,25,1,10,1],
[17.5,64.471,25,1,10,2]
    ])



    
    var ys = tf.tensor2d([
    [21,16.2],
    [21,16.2],
    [21,16.2],
    [21,16.1],
    [21,16.1],
    [21,16.1],
    [21,16.1],
    [21,16.1],
    [21,16.1],
    [18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[18,13.6],
[17,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[18,13.5],
[18,13.5],
[17,13.5],
[17,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[17,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[17,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[17,13.5],
[17,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[18,13.5],
[17,13.5],
[18,13.5],
[18,13.5],
[17,13.5],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.4],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[17,13.1],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.4],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.3],
[15,11.2],
[14,11.2],
[15,11.2],
[15,11.2],
[15,11.2],
[15,11.2],
[15,11.2],
[14,11.2],
[14,11.2],
[15,11.2],
[14,11.2],
[15,11.2],
[15,11.2],
[14,11.2],
[15,11.2],
[14,11.2],
[15,11.2],
[15,11.2],
[14,11.2],
[14,11.2],
[14,11.1],
[14,11.1],
[14,11.1],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[14,10.9],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[7,5.4],
[6,4.6],
[6,4.6],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.5],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.4],
[6,4.3],
[6,4.3],
[6,4.3]
      ]);

    train().then(() => {
      const tensorAPredecir = tf.tensor2d([[17,58.904,20,0,30,1]]);
      let output = model.predict(xs);
      output.print();
      console.log("esperado:","[21,162]");
      
      const saveResults = model.save('localstorage://my-model-1')
      .then((s) => {
        console.log("modelo guardado!");
      });

      

    })

    async function train() {
      var iteraciones = 2;

      for (let i = 0; i < iteraciones; i++) {
        const config = {
          shuffle: true,
          epochs: 10
        }
        const response = await model.fit(xs, ys, config);
        console.log(response.history.loss[0], " en ", i, " de ", iteraciones);
      }
    }
  </script>
</head>

<body>
</body>

</html>